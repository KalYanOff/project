/**
 * FAQ COMPONENT
 * ============
 * 
 * Frequently Asked Questions section with expandable items.
 */

import React, { useState } from 'react';
import { CONTAINER } from '../../config/constants';
import { SectionHeader } from '../UI/SectionHeader';

/**
 * Individual FAQ item with expand/collapse functionality
 * 
 * @param {string} question - The question text
 * @param {React.ReactNode} children - The answer content
 */
function FAQItem({ question, children }) {
  const [isOpen, setIsOpen] = useState(false);
  
  // Generate ID from question text
  const itemId = question.replace(/[^a-z0-9]+/gi, "-").toLowerCase();

  return (
    <div className="border-b py-3">
      <button 
        aria-expanded={isOpen} 
        aria-controls={itemId} 
        onClick={() => setIsOpen(!isOpen)} 
        className="w-full text-left flex items-center justify-between"
      >
        <span className="font-medium">{question}</span>
        <span className="text-gray-500">{isOpen ? "–" : "+"}</span>
      </button>
      
      <div 
        id={itemId} 
        hidden={!isOpen} 
        className="mt-2 bg-white rounded-2xl border p-4 text-gray-700 text-sm"
      >
        {children}
      </div>
    </div>
  );
}

/**
 * Main FAQ section
 */
export function FAQ() {
  // Pricing table data
  const pricingPeriods = [
    '01.05–31.05',
    '01.06–30.06', 
    '01.07–14.07',
    '15.07–31.08',
    '01.09–14.09',
    '15.09–30.09'
  ];

  const pricingData = [
    { name: 'Стандарт 2-местный', prices: [2500, 3000, 3500, 4000, 4000, 3500] },
    { name: 'Стандарт 3-местный', prices: [3000, 3500, 4000, 4500, 4500, 4000] },
    { name: 'Эконом 2-местный', prices: [1000, 1500, 2000, 2000, 2000, 1500] },
    { name: 'Эконом 3-местный', prices: [1500, 2200, 2500, 3000, 2500, 2000] },
    { name: 'Эконом 4-местный', prices: [2000, 2800, 3200, 3600, 3200, 2800] }
  ];

  // Full rules text (moved from constants for better organization)
  const fullRules = `Редакция от: 11.08.2025

Настоящие Правила разработаны в соответствии с действующим законодательством РФ, включая Гражданский кодекс РФ; Закон РФ от 07.02.1992 № 2300‑1 «О защите прав потребителей»; Правила предоставления гостиничных услуг в РФ (в актуальной редакции, утверждённые постановлением Правительства РФ); Федеральный закон от 21.12.1994 № 69‑ФЗ «О пожарной безопасности» и Федеральный закон от 22.07.2008 № 123‑ФЗ «Технический регламент о требованиях пожарной безопасности»; Федеральный закон от 23.02.2013 № 15‑ФЗ «Об охране здоровья граждан от воздействия окружающего табачного дыма и последствий потребления табака»; Федеральный закон от 27.07.2006 № 152‑ФЗ «О персональных данных»; Федеральный закон от 18.07.2006 № 109‑ФЗ «О миграционном учёте иностранных граждан и лиц без гражданства в РФ».
Правила обязательны для всех Гостей и Посетителей.

1. Термины
Гость – физическое лицо, размещаемое в объекте размещения на основании договора.
Посетитель – иное лицо, временно находящееся на территории по приглашению Гостя.
Администрация – уполномоченные представители Собственника.
Комната – предоставляемое помещение для проживания.
Территория – здание, прилегающий участок, парковка и общие зоны.

2. Акцепт Правил и договор
2.1. Бронируя проживание (в т.ч. через онлайн‑площадки), Гость подтверждает ознакомление и согласие с Правилами.
2.2. Экземпляр Правил размещается в общественной зоне и на сайте/страницах бронирования.
2.3. Изменения Правил вступают в силу с момента публикации.

3. Бронирование, тарифы и оплата
Доступный тариф: Стандартный.
3.1. Стандартный. Гарантированное бронирование подтверждается при внесении задатка:
     – при проживании более 3 суток - в размере стоимости 3 суток;
     – при проживании 3 и менее суток - в размере 100% общей стоимости проживания.
Бесплатная отмена - не менее чем за 7 календарных дней до дня заезда (задаток возвращается).
При отмене менее чем за 7 дней, незаезде или досрочном выезде - задаток не возвращается.
3.3. Перенос дат возможен по наличию, с пересчётом по тарифам на новые даты и возможной доплатой/удержанием.
3.4. Незаезд - отсутствие Гостя до 22:00 (по местному времени, МСК, UTC+3) дня заезда без уведомления. В этом случае задаток не возвращается, бронирование аннулируется.
3.5. Очевидная техническая ошибка в цене: Администрация вправе предложить проживание по корректной цене либо отменить бронирование с полным возвратом предоплаты.
3.6. Возвраты денежных средств, если они подлежат осуществлению, производятся в срок до 10 рабочих дней
со дня согласования основания для возврата. Размер возврата определяется с учётом фактических расходов Администрации.

4. Заселение и выезд
4.1. Время заезда: с 12:00. Время выезда: до 10:00.
4.2. Ранний заезд/поздний выезд - по предварительному согласованию (по наличию свободных комнат).
4.3. При заселении предъявляется документ, удостоверяющий личность (паспорт).
Для детей - свидетельство о рождении; для иностранных граждан - документы, предусмотренные миграционным законодательством.
4.4. Размещение несовершеннолетних без сопровождения законных представителей допускается только при наличии надлежащего письменного согласия законного представителя и на условиях Администрации.
4.5. Продление проживания оформляется до 10:00 дня выезда при наличии свободных комнат и полной оплаты.
4.6. При несвоевременном освобождении комнаты без согласования взимается полная суточная стоимость проживания.
4.7. Ключ от комнаты подлежит возврату при выезде.
4.8. Администрация вправе отказать в заселении лицам без документа, удостоверяющего личность, а также лицам в состоянии выраженного опьянения или с агрессивным поведением, создающим угрозу безопасности и/или имуществу, либо при отказе от согласия с Правилами.

5. Размещение, посетители, вместимость
5.1. В комнате допускается проживание не более паспортной вместимости (указана в описании комнаты).
5.2. Предоставление дополнительных мест - не предусмотрено, если иное не оговорено заранее.
5.3. Посетители допускаются с 08:00 до 23:00 при согласовании с Администрацией;
ночёвка посетителей без оформления и оплаты запрещена.
Гость несёт ответственность за действия своих посетителей, включая соблюдение тишины, безопасности и возмещение ущерба.

6. Порядок на территории и в комнатах
6.1. С 23:00 до 08:00
необходимо соблюдать тишину и общественный порядок, а также в иные периоды, установленные региональными нормами о тишине.
6.2. Запрещено:
   – нахождение в состоянии сильного алкогольного опьянения, агрессивное поведение;
   – использование электронагревательных приборов, не входящих в комплектацию комнаты;
   – использование пиротехники, открытого огня, угольных мангалов на балконах и в помещениях;
   – перестановка мебели и демонтаж оборудования без согласования;
   – нанесение надписей/наклеек на поверхности, вынос имущества из комнаты.
6.3. Мусор утилизируется в контейнеры на территории; запрещено оставлять мусор в неотведённых местах.
6.4. Несовершеннолетние до 14 лет могут находиться на Территории только под присмотром законных представителей или сопровождающих взрослых.

7. Животные
7.1. Размещение с животными запрещено (кроме случаев, прямо предусмотренных законом).

8. Пожарная и общая безопасность
8.1. Гость обязан соблюдать инструкции по пожарной безопасности и эвакуации, размещённые в общих зонах.
8.2. Запрещено накрывать, демонтировать или блокировать пожарные датчики и иное оборудование безопасности.
8.3. При обнаружении неисправностей/запаха гари/затопления Гость обязан немедленно уведомить Администрацию.

9. Имущество и возмещение ущерба
9.1. Гость обязуется использовать имущество бережно и по назначению.
9.2. Депозит при заселении может взиматься по усмотрению Администрации.
9.3. За утрату/повреждение имущества Гость возмещает фактический ущерб и расходы на восстановительную уборку, согласно Приложению A либо по документально подтверждённой стоимости.
9.4. Фиксированные суммы в Приложении A - это согласованная оценка расходов на восстановление (чистка, озонация, химчистка, ремонт, логистика, простой комнаты).
Они не являются штрафами и применяются как компенсации.
9.5. Администрация не несёт ответственности за имущество Гостя (в т.ч. за транспортное средство), а также за его жизнь и здоровье в пределах, допустимых законодательством РФ. Найденные вещи хранятся и утилизируются по усмотрению Администрации.
9.6. Гость обязуется соблюдать размещённые инструкции и знаки безопасности; родители и иные законные представители несут ответственность за действия и безопасность несовершеннолетних на Территории.

10. Интернет и связь
10.1. Доступ к Wi‑Fi на всей территории предоставляется бесплатно. Скорость передачи данных и стабильность подключения зависят от работы провайдера услуг связи и не гарантируются администрацией.
10.2. Запрещено использовать сеть для противоправных целей, распространять вредоносный софт, нарушать авторские права.
10.3. При нарушении п. 10.2, а также по обоснованным требованиям правообладателей и компетентных органов Администрация вправе ограничить или приостановить доступ к сети.

11. Видеонаблюдение
11.1. На территории (кроме комнат и санузлов) может вестись видеонаблюдение для обеспечения безопасности, защиты имущества и пресечения правонарушений.
11.2. Записи хранятся 5 календарных дней и удаляются посредством перезаписи (если иное не требуется законом). Записи предоставляются исключительно по официальному запросу органов государственной власти; Гостям и Посетителям записи не предоставляются. На входах размещены информационные таблички.

12. Персональные данные
12.1. Предоставляя данные при бронировании/заселении, Гость даёт согласие на их обработку Собственником в целях заключения и исполнения договора, расчётов, бухгалтерского учёта, обеспечения безопасности, миграционного учёта и информирования по заявке.
12.2. Политика обработки персональных данных и контакт ответственного лица доступны у Администрации и/или на сайте. Отзыв согласия возможен путём направления письменного заявления; при этом некоторые услуги могут быть недоступны.

13. Иностранные граждане
13.1. Иностранные граждане обязаны предъявить документы, предусмотренные миграционным законодательством (паспорт, виза, миграционная карта, уведомление о прибытии/регистрация по месту пребывания при наличии).
13.2. Администрация как принимающая сторона осуществляет действия, предусмотренные законом, по миграционному учёту прибывших иностранных граждан.
13.3. Постановка на миграционный учёт иностранных граждан осуществляется в течение 1 рабочего дня, следующего за днём прибытия; снятие с учёта - при выезде.

14. Курение, алкоголь и иные вещества
14.1. Курение табачной продукции, электронных сигарет и кальянов в помещениях запрещено. Разрешено только в специально обозначенных местах на территории.
14.2. За курение в комнате, на балконе и в общих помещениях взимается фиксированная компенсация за восстановительную уборку/озонацию по Приложению A, а также возмещаются иные документально подтверждённые убытки (включая простой комнаты).
14.3. Употребление и хранение наркотических/психотропных веществ запрещено; при выявлении вызываются правоохранительные органы.

15. Порядок рассмотрения обращений, претензий и споров
15.1. Обращения и претензии направляются на e‑mail delfin.dzhubga@yandex.ru,
в мессенджер или на бумаге по адресу Собственника.
15.2. Срок ответа на претензию - до 14 календарных дней, если иной срок не установлен законом.
15.3. Споры подлежат досудебному урегулированию; при недостижении соглашения рассматриваются в суде по правилам подсудности, установленным законодательством о защите прав потребителей.

16. Досрочное расторжение и отказ в обслуживании
16.1. Фиксация нарушения: составляется акт с указанием даты/времени, фактов и ссылкой на пункт Правил; акт подписывается сотрудником Администрации и, по возможности, Гостем/свидетелем; выполняется фото/видео‑фиксация и/или используется запись с камер наблюдения.
16.2. Администрация вправе в одностороннем порядке расторгнуть договор и выселить Гостя без возврата оплаты за весь период проживания при грубых и/или повторных нарушениях Правил (шум, курение, порча имущества, несоблюдение безопасности, агрессия, отказ от оплаты ущерба и т.п.).
16.3. В случае выселения по указанным основаниям Гость обязан немедленно освободить комнату и территорию.

17. Форс‑мажор
17.1. Стороны освобождаются от ответственности за неисполнение обязательств вследствие обстоятельств непреодолимой силы (стихийные бедствия, аварии сетей, ограничения со стороны органов власти и пр.), при условии их надлежащего подтверждения и уведомления другой стороны.

18. Заключительные положения
18.1. Вопросы, не урегулированные настоящими Правилами, решаются в соответствии с действующим законодательством РФ и по согласованию с Администрацией.
18.2. Недействительность отдельного положения не влечёт недействительность Правил в целом.
18.3. Оригинал Правил хранится у Собственника; копия предоставляется по запросу.

Приложение A. Внутренний прейскурант компенсаций и стоимости восстановительных услуг

Компенсация предназначена для покрытия расходов на восстановление качества услуги (уборка, озонация, химчистка, административные работы, простой комнаты) и не является штрафом. Фактический ущерб и простой комнаты подлежат дополнительной компенсации при наличии оснований.

   – Озонация комнаты после выявления факта курения – 2 000 руб. + компенсация суточной стоимости номера за время простоя.
   – Химчистка матраса – 4 000 руб.
   – Замена стула – 2 000 руб.
   – Замена стола – 4 500 руб.
   – Утеря ключа – 500 руб.
   – Выезд позже установленного времени без согласования – полная суточная стоимость комнаты.
   – Очистка и дезинфекция территории при оставлении мусора около комнаты – 500 руб.
   – Прочие повреждения имущества (мебели, техники, декора, отделки и др.) возмещаются в размере расходов на приобретение или восстановление аналогичного имущества по рыночным ценам на маркетплейсах и/или в розничной сети на дату возмещения, с компенсацией простоя комнаты за срок не менее 2 суток.

Примечания:
   – Указанные суммы являются частью условий договора проживания и подлежат применению при выявлении соответствующих нарушений.
   – Внутренний прейскурант может быть дополнен или изменён администрацией; актуальная версия размещается в правилах проживания и является неотъемлемой частью договора.
   – Возмещение ущерба производится по стоимости нового имущества без учёта износа.

Приложение Б. Нормативные акты (для справок)
Гражданский кодекс Российской Федерации (части первая и вторая).
Закон РФ от 07.02.1992 № 2300‑1 «О защите прав потребителей».
Правила предоставления гостиничных услуг в РФ (актуальная редакция, утверждённая постановлением Правительства РФ).
Федеральный закон от 21.12.1994 № 69‑ФЗ «О пожарной безопасности».
Федеральный закон от 22.07.2008 № 123‑ФЗ «Технический регламент о требованиях пожарной безопасности».
Федеральный закон от 23.02.2013 № 15‑ФЗ «Об охране здоровья граждан от воздействия окружающего табачного дыма и последствий потребления табака».
Федеральный закон от 27.07.2006 № 152‑ФЗ «О персональных данных».
Федеральный закон от 18.07.2006 № 109‑ФЗ «О миграционном учёте иностранных граждан и лиц без гражданства в РФ».`;

const fullPersonal = `Редакция от: 11.08.2025

Ответственный за организацию обработки ПДн: Кильян Олег Гамазович

1. Общие положения
1.1. Политика определяет порядок и условия обработки персональных данных (ПДн) Оператором, меры по их защите, права субъектов ПДн, а также сведения о видеонаблюдении на территории объекта размещения. Политика размещается на сайте и доступна в месте заселения гостей.
1.2. Обработка ПДн осуществляется в соответствии с законодательством РФ (в т.ч. 152-ФЗ «О персональных данных», 149-ФЗ, 402-ФЗ, 109-ФЗ, Правилами предоставления гостиничных услуг и иными НПА) и принципами законности, минимизации, ограниченности целями, точности и хранения не дольше, чем требуется.
1.3. Локализация ПДн: первичный сбор, запись, систематизация, накопление, хранение, уточнение (обновление, изменение) и извлечение ПДн граждан РФ осуществляются с использованием баз данных, находящихся на территории РФ. Использование сервисов, обеспечивающих первичный сбор/хранение ПДн за пределами РФ, не допускается.

2. Термины и категории данных
2.1. Используются термины законодательства РФ.
2.2. Категории субъектов: гости и их представители, посетители территории, посетители сайта, контрагенты/их представители, сотрудники/кандидаты (при наличии).
2.3. Состав ПДн: ФИО, дата рождения, пол, гражданство, реквизиты удостоверяющих личность документов (для детей - сведения из свидетельства о рождении), адрес проживания/регистрации, контакты (телефон, e‑mail), сведения о бронировании и проживании, платежная информация (факт, сумма и способ оплаты), переписка по заявке, подпись, видеозаписи из зон наблюдения, технические данные сайтов (IP‑адрес, cookies, user‑agent).
2.4. Специальные категории ПДн (о здоровье, убеждениях и т.п.) не обрабатываются, за исключением случаев, прямо предусмотренных законом. Биометрические ПДн не обрабатываются; видеозаписи не используются для биометрической идентификации.
2.5. ПДн третьих лиц, предоставленные Гостем (сопроверяющие, дети и т.п.), предоставляются Гостем при подтверждении полномочий и информировании этих лиц.

3. Цели и основания обработки
3.1. Цели: заключение и исполнение договоров размещения; ведение взаиморасчётов и бухгалтерского учёта; миграционный учёт иностранных граждан; обеспечение безопасности людей и имущества (в т.ч. видеонаблюдение); рассмотрение обращений/претензий; информирование по заявке субъекта; функционирование сайта.
3.2. Основания: исполнение договора с субъектом; исполнение обязательных требований закона; законный интерес Оператора
(без ущерба правам субъекта) - в т.ч. для безопасности/видеонаблюдения; согласие субъекта - в случаях, когда это необходимо (например, обратная связь, рассылка по заявке).

4. Способы обработки, хранение и сроки
4.1. Обработка ПДн проводится с использованием ИСПДн и/или без автоматизации. 
4.2. Сроки хранения:
бухгалтерские документы/расчёты - не менее 5 лет;
документы мигучёта - в сроки, установленные законодательством;
переписка/брони - до 3 лет после завершения проживания/переписки (если не требуется дольше по закону/для защиты прав);
видеозаписи - 5 дней, затем удаляются путём перезаписи (кроме случаев официальных запросов);
cookies/логи - в объёме и сроки, необходимом для целей сайта.
4.3. По достижении целей ПДн уничтожаются или обезличиваются, если иное не предусмотрено законом.

5. Передача и поручение обработки
5.1. ПДн могут передаваться (в необходимом объёме) банкам/платёжным организациям, почтовым/курьерским службам, ИТ‑подрядчикам (хостинг, почта, CRM), бухгалтерии/аудиторам, правоохранительным/госорганам - на законных основаниях.
5.2. Поручённая обработка осуществляется по договорам с требованиями к защите ПДн. Подрядчики обязуются обеспечивать конфиденциальность и безопасность ПДн.
5.3. Трансграничная передача ПДн: не осуществляется. При необходимости будет осуществляться после направления уведомления в Роскомнадзор и при соблюдении требований законодательства (в т.ч. наличия достаточных гарантий и/или согласия субъекта, если требуется).

6. Видеонаблюдение
6.1. На территории (кроме комнат и санузлов) ведётся видеонаблюдение для обеспечения безопасности людей и имущества, предотвращения и расследования инцидентов.
6.2. Срок хранения записей - 5 дней, после чего записи автоматически удаляются (перезаписываются), если иное не требуется законом.
6.3. Доступ к записям имеют уполномоченные сотрудники. Предоставление записей - исключительно по официальным запросам органов государственной власти. Гостям и посетителям записи не предоставляются. Информирование - табличками и настоящей Политикой.

7. Права субъектов ПДн и порядок обращений
7.1. Субъект вправе получать сведения об обработке своих ПДн, требовать их уточнения/исправления/уничтожения при незаконной обработке, отозвать согласие (если обработка основана на согласии), оспаривать действия Оператора.
7.2. Обращение направляется на e‑mail delfin.dzhubga@yandex.ru или почтой на адрес Оператора. Для ответа Оператор вправе запросить данные для идентификации заявителя.
7.3. Срок ответа - до 30 календарных дней с даты регистрации обращения.

8. Cookies и интернет‑сервисы
8.1. На сайте используются cookies и инструменты веб‑аналитики для обеспечения работы сайта и улучшения сервиса. Пользователь вправе ограничить cookies в настройках браузера (это может повлиять на корректность работы функций).
8.2. Оператор не использует сервисы, обеспечивающие первичный сбор/хранение ПДн граждан РФ за пределами РФ. Перечень сторонних сервисов (при использовании) публикуется на сайте.

9. Инциденты (утечки ПДн)
9.1. При выявлении неправомерного доступа/утечки ПДн Оператор в течение 24 часов направляет первичное уведомление в Роскомнадзор и в течение 72 часов - отчёт о результатах расследования, принятых мерах и последствиях.
9.2. При высоком риске вреда субъектам Оператор уведомляет субъектов ПДн (если это требуется законом) удобным способом.
9.3. Оператор ведёт журнал инцидентов и событий информационной безопасности.

10. Меры защиты ПДн
10.1. Назначение ответственного; локальные акты; контроль доступа; учёт и хранение носителей; антивирусная защита и актуализация ПО; резервное копирование; журналирование обращений; обучение сотрудников; обязательства о неразглашении; внутренний контроль/аудит соответствия.
10.2. Оператор принимает иные необходимые организационные и технические меры, соответствующие требованиям законодательства РФ.

11. Обработка ПДн несовершеннолетних
11.1. ПДн несовершеннолетних до 14 лет обрабатываются с согласия законных представителей, за исключением случаев, предусмотренных законом (оформление проживания ребёнка с родителем/опекуном, мигучёт и т.п.).

12. Актуализация Политики
12.1. Политика может обновляться; актуальная редакция размещается на сайте и доступна на стойке регистрации. Дата последней редакции указана в шапке документа.`;


  return (
    <section id="faq" className="bg-white">
      <SectionHeader title="FAQ" titleClass="text-[#0073ff]" />
      
      <div className={`${CONTAINER} max-w-[1000px] pb-12`}>
        
        {/* Pricing FAQ */}
        <FAQItem question="Актуальные цены на 2025">
          <div className="overflow-x-auto bg-gray-50 rounded-xl p-4">
            {/* Desktop table */}
            <table className="hidden sm:table w-full border-collapse text-center text-sm bg-white rounded-lg overflow-hidden shadow-sm">
              <caption className="sr-only">Цены на проживание 2025</caption>
              
              {/* Table header */}
              <thead>
                <tr className="bg-gradient-to-r from-[#0023eb] to-[#0073ff] text-white">
                  <th className="text-left p-4 font-semibold border-r border-white/20">Категория</th>
                  {pricingPeriods.map((period) => (
                    <th key={period} className="p-4 border-r border-white/20 last:border-r-0">
                      <span className="block font-semibold">
                        {period}
                      </span>
                    </th>
                  ))}
                </tr>
              </thead>
              
              {/* Table body */}
              <tbody>
                {pricingData.map((row, index) => (
                  <tr 
                    key={row.name} 
                    className={index % 2 ? 'bg-blue-50/50' : 'bg-white'}
                  >
                    <td className="text-left p-4 font-medium border-r border-gray-200">{row.name}</td>
                    {row.prices.map((price, priceIndex) => (
                      <td key={priceIndex} className="p-4 border-r border-gray-200 last:border-r-0 font-medium">{price}₽</td>
                    ))}
                  </tr>
                ))}
              </tbody>
            </table>
            
            {/* Mobile cards */}
            <div className="sm:hidden space-y-4">
              {pricingData.map((row, index) => (
                <div key={row.name} className="bg-white rounded-lg p-4 shadow-sm">
                  <h4 className="font-semibold text-[#0023eb] mb-3 text-center">{row.name}</h4>
                  <div className="grid grid-cols-2 gap-2 text-sm">
                    {pricingPeriods.map((period, periodIndex) => (
                      <div key={period} className="flex justify-between items-center py-1">
                        <span className="text-gray-600 text-xs">{period}</span>
                        <span className="font-medium">{row.prices[periodIndex]}₽</span>
                      </div>
                    ))}
                  </div>
                </div>
              ))}
            </div>
          </div>
        </FAQItem>

        {/* Rules FAQ */}
        <FAQItem question="Правила предоставления услуг">
          <div className="prose prose-sm max-w-none text-gray-800">
            <pre className="whitespace-pre-wrap">{fullRules}</pre>
          </div>
        </FAQItem>
        <FAQItem question="Политика обработки персональных данных">
          <div className="prose prose-sm max-w-none text-gray-800">
            <pre className="whitespace-pre-wrap">{fullPersonal}</pre>
          </div>
        </FAQItem>
      </div>
    </section>
  );
}